const avain0 = ['k', '~', 'f', 'I', 'U', 'Ä', 'P', 'z', 'H', 'a', 'S', 'x', 'r', 'F', ']', 'R', '_', 'T', 'u', '8', 'ä', 'N', '+', '`', '&', 'd', '-', 'j', '5', '2', 'L', 'g', '!', 'M', '#', 'Ö', '1', '>', '^', '/', 'w', 'h', '=', '$', '9', 'm', 'c', 'X', ',', '0', 't', '}', 'O', 'q', '<', '[', 'W', 'J', 'K', 'Å', 's', 'Z', 'Y', 'C', 'b', 'V', 'B', 'v', '%', '7', 'D', '(', ':', '6', '?', 'Q', 'e', "'", 'i', 'A', 'å', '"', 'l', 'y', 'E', ';', ')', 'ö', 'p', 'n', '@', 'o', '{', '*', '3', '.', '4', 'G'];

const avain1 = ['1', '_', 'Z', '?', '4', '[', '=', 'ä', 'A', '-', 'L', 't', 'o', '"', 'Ö', 'c', '6', 'l', 'Q', 'd', 'T', '0', 'u', ')', 'q', 'h', '~', 'W', 'Y', 'J', '$', 'I', 'X', '5', '{', '*', '`', 'e', "'", '/', 'a', ',', 'p', '}', 'å', '>', 'M', '7', 'P', 'C', 'k', '9', '@', 'H', 'w', 'U', 'x', 'f', ']', 'R', 'K', 'V', ':', 'D', 'g', 'n', 'Å', 'B', '%', 'z', '+', 'G', '3', '!', '.', 'r', 'O', '<', 'Ä', 's', 'm', 'ö', 'E', ';', '(', 'N', '#', '8', 'S', 'v', 'i', 'F', 'j', '&', '^', 'y', '2', 'b'];

const avain2 = ['*', '5', 'w', 'g', 'I', '6', ':', 'O', 'q', 'å', 'd', ',', '"', 'S', 'ä', 'M', 'W', 't', 'z', 'o', 'K', '+', '.', 'p', 'U', 'c', 'Y', 'l', 'F', '[', '-', ';', '{', 'D', '%', '`', '1', '/', 'C', 'm', '>', 'Z', ')', 'Ö', 'B', 'H', '(', '@', '!', '0', '=', '4', 'j', '_', '^', 'P', '8', ']', 'N', 'a', 'k', '$', 'ö', 's', "'", 'n', '}', 'r', 'G', 'E', '#', 'h', 'i', 'x', '3', 'X', 'A', 'y', 'L', 'e', '<', 'R', 'Å', 'V', '~', '9', '?', 'b', 'Ä', 'T', '2', 'v', 'Q', '7', 'f', '&', 'J', 'u'];

const avain3 = [']', 'z', '`', '7', '(', '=', 'b', 'A', 'R', 'Z', 'S', 'a', 'J', 'C', '"', ':', 'Q', "'", 'k', 'å', 'p', 'H', '3', 's', 'v', 'c', 'Ä', 'g', 'F', '&', '}', 't', 'D', 'u', 'Y', 'L', 'N', 'V', 'K', ')', '2', ',', 'd', '^', '1', '$', 'M', 'T', 'I', 'ä', 'W', 'j', '!', 'm', '<', '6', '*', 'f', 'e', 'w', 'y', '5', '>', '[', 'U', '4', '9', '.', '%', 'B', 'i', 'x', 'Ö', 'l', '0', '#', 'o', 'h', 'Å', ';', 'X', 'ö', '{', 'n', 'r', '~', '8', 'q', 'P', '-', '_', '?', '/', 'E', '+', '@', 'G', 'O'];

const avain4 = [';', 'b', 'T', '`', 'n', '[', 'a', '0', ':', '<', 'g', ')', 'z', '?', ']', 'S', 'f', '3', 'Q', '"', 'A', '{', '/', 'v', '+', '1', 'h', '@', 'D', '^', 'Å', '.', 'J', 'o', '$', 'k', 'M', 'y', 'x', 'j', '2', '6', 'm', '-', ',', 'Z', '!', 'Ö', '_', 'I', '7', 'Ä', 'H', "'", 'O', 'Y', '(', 'u', 'C', '=', '8', 'å', 'P', 's', '4', '#', 'q', 'W', 'V', '>', 'R', 'c', 'l', 'N', 'U', 'L', 'F', 'X', '&', 'G', '~', '}', 'd', 'ä', '9', 'e', '5', 'i', 'p', 'r', 'E', 'B', 't', '*', '%', 'K', 'ö', 'w'];

const avain5 = ['=', 'b', '5', 'o', ':', 'S', 'p', 'D', '^', '7', 'H', '6', 'ö', 'g', '<', 'x', 'a', '0', '[', ']', '.', 's', 'Å', 'c', '$', 'F', 'C', '&', 'Q', '~', 'k', 't', 'U', 'V', 'n', '9', 'ä', 'G', 'm', 'Y', 'y', 'M', 'A', 'i', '8', '1', '!', '@', 'f', 'l', 'O', 'T', '#', '+', 'd', '_', 'J', 'W', '4', '/', 'X', 'u', 'E', 'h', 'z', 'I', 'e', 'L', '"', 'B', '}', 'q', '3', ')', '`', '{', 'N', ',', '%', 'v', '>', 'j', 'r', 'P', 'Z', 'Ö', "'", 'Ä', '-', 'å', 'K', 'w', 'R', '*', '?', '2', '(', ';'];

const avain6 = ['R', '$', '>', 'H', 'E', 'i', '_', '@', 'Q', '%', 'N', 'U', '/', '8', 'å', ']', 'B', 'y', '<', 'g', 'Ö', '{', 'ä', '1', 'r', 'G', 'f', 'Z', '0', 'D', 'p', 's', 'w', '}', 'k', '`', 'C', 'z', 'e', '!', ')', 'V', '~', 'n', 'd', 'q', 'T', ',', '"', '5', '^', "'", 'ö', 'x', 'S', 'm', 'O', 'h', 'M', 'a', 'Å', '2', '(', 'Ä', 'Y', 'j', 'c', '+', '[', 'X', ':', '3', 'L', '9', 'u', 'F', 't', 'W', '6', '7', '-', '.', '4', '?', 'A', 'v', '=', 'o', 'K', 'l', '*', ';', 'b', 'P', '&', 'I', '#', 'J'];

const avain7 = ['e', 'c', 'a', '_', '&', 'M', 'i', 'ö', 'Q', '!', 'p', 'z', 'å', 'P', 'N', '*', '~', 'S', 't', ';', 'D', 'Z', 'X', 'b', 'w', '1', 'n', 'Ö', '#', 'G', 'B', 'y', 'A', '`', '3', 'q', '7', 'C', '+', 'k', 'H', '2', 'V', ')', 'L', '=', '<', 'Ä', ',', '9', "'", 'u', '/', 'h', '"', 'j', '%', '$', '.', 'f', 's', 'O', 'm', ':', '^', 'r', 'l', 'g', '{', 'o', '5', '4', '8', 'Y', '}', 'R', 'ä', 'J', '>', 'v', 'E', 'Å', 'K', 'I', '[', 'T', 'F', '0', 'U', ']', 'x', 'W', '(', '@', '-', 'd', '?', '6'];

const avain8 = ['0', 's', '@', 'D', 'o', 'J', 'H', 'd', '4', 'g', '#', 'K', ';', 'T', 'L', '7', 'u', "'", '(', ':', 'W', '&', ']', 'B', 'X', 'ä', 'Y', '[', '$', 'a', 'V', '<', 'U', 't', 'ö', '.', 'z', '/', '!', 'f', 'k', 'A', 'l', '-', 'P', 'q', '8', 'S', 'Ö', 'N', 'M', 'Å', '>', 'C', '9', '=', 'r', 'y', '^', 'j', '6', 'n', '?', '"', 'w', 'b', '_', 'p', 'G', ')', 'Z', '1', 'c', 'Ä', '%', 'I', 'x', 'm', 'F', '5', '*', '{', ',', '`', 'h', 'i', '+', 'O', 'R', 'E', 'å', 'e', '}', 'Q', '~', 'v', '3', '2'];

const avain9 = ['Y', '~', '?', '-', '2', '1', 'ö', 'ä', '%', '@', '>', 'L', 'a', 'V', 'b', '.', '`', 'D', 'k', '=', '{', ';', ')', 'n', '*', 'Ä', 'r', 'Å', 'A', 't', 'B', 'H', '#', 'W', 'f', 'd', '^', 'O', ',', '9', 'å', 'N', '!', '3', '7', 'e', 'E', 'o', '/', '$', 'y', '<', '0', '8', '(', 'z', 'q', 'g', '4', "'", 'c', ']', 'S', '}', '&', 'l', 'p', 'I', ':', 'x', '_', 'w', 'T', 'h', 'C', 'Q', '6', 'F', '+', '"', 'P', 'M', 'j', 'Ö', 'u', '[', 'i', 'G', 'v', 'U', 's', 'X', 'Z', 'R', 'K', 'J', '5', 'm'];

let keyList = [avain0, avain1, avain2, avain3, avain4, avain5, avain6, avain7, avain8, avain9]
let keyList2 = [avain0, avain1, avain2, avain3, avain4, avain5, avain6, avain7, avain8, avain9]

shuffleKey(keyList);
function shuffleKey(keyList) {
  for (let i = keyList.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    let temp = keyList[i];
    keyList[i] = keyList[j];
    keyList[j] = temp;
  }
}

shuffleKey(keyList2);
function shuffleKey(keyList2) {
  for (let i = keyList2.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    let temp = keyList2[i];
    keyList2[i] = keyList2[j];
    keyList2[j] = temp;
  }
}


let userKey = getKeyNumber(keyList);
let userKey2 = getKey2Number(keyList2);
function getKeyNumber() {
  let keyListStr = [];
  for (let i = 0; i < keyList.length; i++) {
    if (keyList[i] == avain0) {
      keyListStr.push("0");
    }
    else if (keyList[i] == avain1) {
      keyListStr.push("1");
    }
    else if (keyList[i] == avain2) {
      keyListStr.push("2");
    }
    else if (keyList[i] == avain3) {
      keyListStr.push("3");
    }
    else if (keyList[i] == avain4) {
      keyListStr.push("4");
    }
    else if (keyList[i] == avain5) {
      keyListStr.push("5");
    }
    else if (keyList[i] == avain6) {
      keyListStr.push("6");
    }
    else if (keyList[i] == avain7) {
      keyListStr.push("7");
    }
    else if (keyList[i] == avain8) {
      keyListStr.push("8");
    }
    else if (keyList[i] == avain9) {
      keyListStr.push("9");
    }
  }
  return keyListStr.join("");
}

function getKey2Number() {
  let keyList2Str = [];
  for (let i = 0; i < keyList2.length; i++) {
    if (keyList2[i] == avain0) {
      keyList2Str.push("0");
    }
    else if (keyList2[i] == avain1) {
      keyList2Str.push("1");
    }
    else if (keyList2[i] == avain2) {
      keyList2Str.push("2");
    }
    else if (keyList2[i] == avain3) {
      keyList2Str.push("3");
    }
    else if (keyList2[i] == avain4) {
      keyList2Str.push("4");
    }
    else if (keyList2[i] == avain5) {
      keyList2Str.push("5");
    }
    else if (keyList2[i] == avain6) {
      keyList2Str.push("6");
    }
    else if (keyList2[i] == avain7) {
      keyList2Str.push("7");
    }
    else if (keyList2[i] == avain8) {
      keyList2Str.push("8");
    }
    else if (keyList2[i] == avain9) {
      keyList2Str.push("9");
    }
  }
  return keyList2Str.join("");
}

function calculate() {
  let textInput = document.getElementById("textInput").value;
  let inputArray = textInput.split("");
  let encryptedText = encrypt(inputArray, keyList, keyList2);
  document.getElementById("decryptionOutput").innerHTML = encryptedText + "<br><br>Decryption key is: " + userKey.toString() + userKey2.toString();
}

function keystart() {
  location.reload();
  document.getElementById("textInput").value = "";
}

function encrypt(inputArray, keyList, keyList2) {
  let encryptedArray = [];
  for (let i = 0; i < inputArray.length; i++) {
    let index = i % 10;
    let currentCharacter = inputArray[i];
    let indexInKey = keyList[index].indexOf(currentCharacter);
    if (indexInKey >= 0) {
      encryptedArray.push(keyList2[index][indexInKey]);
    } else {
      encryptedArray.push(currentCharacter);
    }
  }
  return encryptedArray.join("");
}


function deCryptCalculate(){
  let deCryptInput = document.getElementById("deCryptTextInput").value;
  let deCryptionKeyInput = document.getElementById("deCryptKeyInput").value;
  let deCryptKey = deCryptionKeyInput.split("");
  let deCryptArray = deCryptInput.split("");
  let deKey1 = getDeKey1(deCryptKey);
  let deKey2 = getDeKey2(deCryptKey);
  let deCryptedText = deCrypt(deCryptArray, deKey1, deKey2);
  document.getElementById("decryptionOutput").innerHTML = deCryptedText;
}

function derestart() {
  location.reload();
  document.getElementById("deCryptTextInput").value = "";
}

function getDeKey1(deCryptKey) {
  let dkeyList1 = [];
  let deCryptKeyFirst10 = deCryptKey.slice(0, 10);
  for (let i = 0; i < deCryptKeyFirst10.length; i++) {
    if (deCryptKeyFirst10[i] == 0) {
      dkeyList1.push(avain0);
    }
    else if (deCryptKeyFirst10[i] == 1) {
      dkeyList1.push(avain1);
    }
    else if (deCryptKeyFirst10[i] == 2) {
      dkeyList1.push(avain2);
    }
    else if (deCryptKeyFirst10[i] == 3) {
      dkeyList1.push(avain3);
    }
    else if (deCryptKeyFirst10[i] == 4) {
      dkeyList1.push(avain4);
    }
    else if (deCryptKeyFirst10[i] == 5) {
      dkeyList1.push(avain5);
    }
    else if (deCryptKeyFirst10[i] == 6) {
      dkeyList1.push(avain6);
    }
    else if (deCryptKeyFirst10[i] == 7) {
      dkeyList1.push(avain7);
    }
    else if (deCryptKeyFirst10[i] == 8) {
      dkeyList1.push(avain8);
    }
    else if (deCryptKeyFirst10[i] == 9) {
      dkeyList1.push(avain9);
    }
  }
  return dkeyList1;
}

function getDeKey2(deCryptKey) {
  let dkeyList2 = [];
  let deCryptKeyLast10 = deCryptKey.slice(-10);
  for (let i = 0; i < deCryptKeyLast10.length; i++) {
    if (deCryptKeyLast10[i] == 0) {
      dkeyList2.push(avain0);
    }
    else if (deCryptKeyLast10[i] == 1) {
      dkeyList2.push(avain1);
    }
    else if (deCryptKeyLast10[i] == 2) {
      dkeyList2.push(avain2);
    }
    else if (deCryptKeyLast10[i] == 3) {
      dkeyList2.push(avain3);
    }
    else if (deCryptKeyLast10[i] == 4) {
      dkeyList2.push(avain4);
    }
    else if (deCryptKeyLast10[i] == 5) {
      dkeyList2.push(avain5);
    }
    else if (deCryptKeyLast10[i] == 6) {
      dkeyList2.push(avain6);
    }
    else if (deCryptKeyLast10[i] == 7) {
      dkeyList2.push(avain7);
    }
    else if (deCryptKeyLast10[i] == 8) {
      dkeyList2.push(avain8);
    }
    else if (deCryptKeyLast10[i] == 9) {
      dkeyList2.push(avain9);
    }
  }
  return dkeyList2;
}

function deCrypt(deCryptArray, deKey1, deKey2){
  let deCryptedArray = [];
  for (let i = 0; i < deCryptArray.length; i++) {
    let index = i % 10;
    let currentCharacter = deCryptArray[i];
    let indexInDeKey2 = deKey2[index].indexOf(currentCharacter);
    if (indexInDeKey2 >= 0) {
      deCryptedArray.push(deKey1[index][indexInDeKey2]);
    } else {
      deCryptedArray.push(currentCharacter);
    }
  }
  return deCryptedArray.join("");
}


//sama kuin avainBackUp, tämä on vain Durstenfeld shufflea varten
/*
const array = [
  "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "å", "ä", "ö",
  "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "Å", "Ä", "Ö",
  "!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "-", "_", "=", "+", "[", "{", "]", "}", ",", ":", ";", "'", '"', "<", ".", ">", "/", "?", "`", "~",
  "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"
];
//Durstenfeld shuffle, sama kuin keyListissä, tätä käytetään uusien avainten(array) tekemiseen
shuffleArray(array);
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    let temp = array[i];
    array[i] = array[j];
    array[j] = temp;
  }
}
console.log(array);
*/

/*
const avainBackUp = [
    "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "å", "ä", "ö",
    "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "Å", "Ä", "Ö",
    "!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "-", "_", "=", "+", "[", "{", "]", "}", ",", ":", ";", "'", '"', "<", ".", ">", "/", "?", "`",
    "~", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"
  ];
  */

//Frontti JavaScriptiä tästä eteenpäin

const avain0 = ['J', 'g', 'B', ' ', '%', 'l', 'Y', 'N', 'a', '@', '5', 'O', "'", '/', 'n', '=', ';', 'd', '{', '>', 'F', 'å', 'u', 'M', ',', ':', '3', 'Z', 'A', 'q', 'ö', '&', 'G', 'r', 'U', 'k', 'o', '?', 'P', '#', '^', '0', '[', '`', 'Ä', 'z', 'h', 'e', 'V', '_', 'm', 'I', '}', 'H', 'w', '-', '*', '7', '2', 'Q', 'K', 'p', 'D', '8', 'i', 'C', 'f', 'T', 'R', 'S', '4', 'j', 'W', '!', 'Ö', 'E', '1', 'Å', '~', 'ä', '<', '9', 't', '+', '6', '$', ']', 'v', '(', 'y', '.', '"', 's', ')', 'x', 'c', 'X', 'L', 'b'];

const avain1 = ['U', 'y', 'h', 'a', ',', 'J', 's', 'H', 'r', 'C', 'T', 'd', 'm', '3', '?', ' ', 'L', 'X', '%', ':', 'c', 'p', '_', 'z', 'D', 'B', '+', 'Z', '0', 'u', 'x', '$', 'v', 'å', 'i', 'l', '!', '[', 'N', 'O', ']', '*', '}', '6', 'I', 'Ä', 'ä', '>', '(', 'f', '1', '4', 'A', 'Ö', 'Y', '/', "'", ';', 'G', '.', '^', '2', '=', 'ö', 'Å', '~', 'n', '7', '`', ')', 'F', 'e', '&', 'R', 'V', 'P', '<', '"', '@', 'S', 'k', '9', 'Q', '{', 'g', '#', 'E', 'q', 'w', 'K', '8', 'b', 't', '-', 'M', 'j', 'o', 'W', '5'];

const avain2 = ['W', 'Z', '!', '%', 'D', 'G', '`', '9', 'c', 'Ä', '"', '_', 'd', 'M', 'e', 'x', 'u', 'g', 'J', '~', 'f', 'i', 't', ')', '$', "'", '4', '^', '*', 'z', 'N', '{', 'b', '}', '1', ':', ' ', 'ö', 'ä', '2', 'O', 'B', '=', 'T', 'F', 'Ö', 'h', 'q', '#', '[', '/', ';', 'V', 'Y', 'L', 'a', 'k', '0', ']', 'm', 'U', '>', '<', '?', 'å', 'E', 'n', 'Q', 'Å', '(', 'A', ',', 'y', 'I', '&', 'j', 'R', 'w', '3', 's', 'v', 'H', 'X', 'S', 'l', 'P', '.', '7', '6', 'r', 'C', '8', '5', '@', 'p', 'K', '+', '-', 'o'];

const avain3 = ['4', ' ', '<', ')', 'E', 'J', 'W', '}', '"', 'h', 'K', 'o', 'k', 'L', 'z', 'b', '1', 'j', '9', '~', 'U', ']', '{', '(', 'n', 'y', '%', 'O', '6', 'i', '=', 'x', '2', '3', 'Z', 'r', 'A', 't', 'p', '@', 'F', '/', 'M', 'B', 'Ä', 'w', 'R', 'S', 'q', 'ä', '[', 'G', 'e', 'm', '$', 'c', '^', 'l', 'V', 'Q', 'Ö', 'g', 'C', 'v', "'", 'H', 'Y', '5', ';', 'a', 'T', '!', 'N', '8', '*', '7', '`', 'u', ':', 'ö', '.', 'P', '?', 'd', 'I', 's', 'f', '-', '#', '&', 'Å', 'å', '_', 'D', '+', 'X', '>', '0', ','];

const avain4 = ['*', 'Ä', 'c', 'E', 'q', '/', 'u', 'ä', '8', 'A', 'Å', 'x', 'a', '6', '1', '$', 'Y', 'i', 'ö', '~', 'w', 'V', 'R', 'r', '.', 'l', 'O', ';', 'M', 'z', '7', 'f', 'T', 't', '"', 'h', 'C', '&', '+', '^', 'Q', 'U', 'å', '}', 'g', '#', 'F', '%', 'p', '>', '2', 'X', '(', 'W', '_', '4', '@', '[', '{', '?', "'", 'I', ')', 'j', 'J', '=', 'v', 'G', '`', 'N', 'H', 'P', 'K', 'o', 'b', 'n', 'e', '5', '3', '!', 'k', 'y', 'd', 'Ö', 'm', ']', 'S', '9', 'B', 'L', 'Z', ',', '<', '0', 's', '-', ' ', ':', 'D'];

const avain5 = ['S', 'N', 'r', '5', 'O', 'K', 'G', 'C', 'R', 'U', 'v', ',', 't', '9', 'X', 'c', 'V', 'E', 'B', '^', 'o', 'b', "'", 'H', 'F', 'g', 'p', '0', 'ä', '_', 'ö', ':', '?', 'j', '8', '{', '1', '#', 'd', '&', 'Ö', '~', 'M', '<', '=', 'A', 'D', '4', 'a', '[', 'z', '`', '.', ' ', '/', 'e', 'w', '3', '}', 'å', 'y', '"', ')', 'Y', 'Q', '!', 'm', 'J', '$', 'Z', 'k', 'T', 'u', 'I', '(', 'Å', 'x', 'l', '@', 's', '2', '6', '>', '%', 'L', '7', 'W', '-', 'f', ']', 'q', ';', '+', 'n', 'i', 'h', 'Ä', 'P', '*'];

const avain6 = ['z', "'", '2', ' ', '/', 'Å', 'P', '%', 'L', '9', '0', 'y', 'X', 'A', 'f', '`', 'c', 'b', '6', '!', ',', 't', 'D', 'p', 'J', 's', '>', '"', '#', 'w', 'M', 'v', '{', 'I', '=', 'ä', 'F', 'k', 'Ä', 'Y', 'E', 'N', 'W', 'a', 'l', '*', ')', '(', 'V', 'n', '+', '8', 'e', 'd', 'Ö', 'g', '1', ']', 'B', '5', 'Z', 'S', 'r', 'j', '}', '~', 'H', 'G', 'å', 'O', 'U', 'i', '4', '7', '?', ';', 'ö', '&', 'R', 'C', '_', '.', '@', 'm', '$', '[', 'Q', 'o', '3', 'u', '-', 'x', '^', 'q', ':', 'K', '<', 'h', 'T'];

const avain7 = ['!', 'b', '4', 'o', 'i', 'G', ']', '?', ')', '{', '_', '7', 'ö', 'V', 'z', 'ä', 'n', 'r', '[', 'e', '5', 'g', '$', 'x', ' ', 'k', 'l', 'O', 'Ä', 'f', 'Z', ':', '(', 'Å', 'R', '*', 'S', '8', '<', 'W', 'p', ';', 'F', '2', '@', '0', '>', 'D', 'a', 'T', '&', 'M', '#', '~', 'j', '6', 'Q', 'L', '+', 'H', '9', 'v', '1', 'P', 'X', "'", 'Ö', 'm', 't', 'I', '-', 'J', '=', 'y', 'A', '`', 'C', 'K', '}', 'h', '.', 'c', 'U', '3', 's', '^', 'd', 'å', ',', '/', 'N', 'u', 'Y', 'w', '"', 'q', '%', 'B', 'E'];

const avain8 = [':', 'n', 'R', '_', '(', 'y', 'Ö', '}', '#', '1', 'M', 'L', 'N', 'S', 'b', '2', 'v', '5', 'A', 'p', 'U', '[', '*', "'", 'r', '.', '=', 'x', ')', ']', 'h', 'ä', 'B', '0', '/', 'X', '?', 'E', 'd', ',', 'å', '<', '>', 'O', 'ö', 'j', '"', 'Q', 'i', 'm', 'C', 'P', '-', 't', 'I', '3', '+', 'G', 'u', 'F', 'Ä', 's', '~', ';', 'f', 'l', 'e', 'T', 'J', '7', 'a', '8', '`', 'K', 'o', '&', 'w', '!', 'V', '{', '4', 'W', '9', '$', '6', 'D', 'q', ' ', 'Z', 'k', 'H', 'Y', '@', 'g', 'c', 'Å', 'z', '%', '^'];

const avain9 = ['D', '&', '*', '@', '7', '=', '+', 'å', 'h', 'U', '{', 'f', '}', '#', ']', 'A', 'i', 'W', 't', ')', 'k', 'v', '5', 'T', '$', 'X', '<', 'j', 'r', 'B', '!', '2', '.', '9', 'Ö', '`', 'R', 'K', 'G', ';', 'Q', 'I', 'V', '6', '^', 'x', '~', '/', "'", 'n', '_', 'ä', 'P', ' ', '?', '8', 'L', '3', 'Y', 'd', ':', 'q', 'g', 'l', ',', 'Ä', 'b', 'c', 'F', 'u', '-', 'H', 'y', 'S', '(', 'o', 'N', 'm', '0', '4', 'p', 'z', 'C', 'e', 's', 'ö', 'w', 'E', '%', '"', 'a', 'Å', 'J', 'Z', 'O', '>', 'M', '1', '['];

let keyList = [avain0, avain1, avain2, avain3, avain4, avain5, avain6, avain7, avain8, avain9];
let keyList2 = [avain0, avain1, avain2, avain3, avain4, avain5, avain6, avain7, avain8, avain9];



shuffleKey(keyList);
function shuffleKey() {
  for (let i = keyList.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    let temp = keyList[i];
    keyList[i] = keyList[j];
    keyList[j] = temp;
  }
}

shuffleKey2(keyList2);
function shuffleKey2() {
  for (let i = keyList2.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    let temp = keyList2[i];
    keyList2[i] = keyList2[j];
    keyList2[j] = temp;
  }
}

function getKeyNumber() {
  let keyListStr = [];
  for (let i = 0; i < keyList.length; i++) {
    if (keyList[i] == avain0) {
      keyListStr.push("0");
    }
    else if (keyList[i] == avain1) {
      keyListStr.push("1");
    }
    else if (keyList[i] == avain2) {
      keyListStr.push("2");
    }
    else if (keyList[i] == avain3) {
      keyListStr.push("3");
    }
    else if (keyList[i] == avain4) {
      keyListStr.push("4");
    }
    else if (keyList[i] == avain5) {
      keyListStr.push("5");
    }
    else if (keyList[i] == avain6) {
      keyListStr.push("6");
    }
    else if (keyList[i] == avain7) {
      keyListStr.push("7");
    }
    else if (keyList[i] == avain8) {
      keyListStr.push("8");
    }
    else if (keyList[i] == avain9) {
      keyListStr.push("9");
    }
  }
  return keyListStr.join("");
}

function getKey2Number() {
  let keyList2Str = [];
  for (let i = 0; i < keyList2.length; i++) {
    if (keyList2[i] == avain0) {
      keyList2Str.push("0");
    }
    else if (keyList2[i] == avain1) {
      keyList2Str.push("1");
    }
    else if (keyList2[i] == avain2) {
      keyList2Str.push("2");
    }
    else if (keyList2[i] == avain3) {
      keyList2Str.push("3");
    }
    else if (keyList2[i] == avain4) {
      keyList2Str.push("4");
    }
    else if (keyList2[i] == avain5) {
      keyList2Str.push("5");
    }
    else if (keyList2[i] == avain6) {
      keyList2Str.push("6");
    }
    else if (keyList2[i] == avain7) {
      keyList2Str.push("7");
    }
    else if (keyList2[i] == avain8) {
      keyList2Str.push("8");
    }
    else if (keyList2[i] == avain9) {
      keyList2Str.push("9");
    }
  }
  return keyList2Str.join("");
}

let userKey = getKeyNumber(keyList);
let userKey2 = getKey2Number(keyList2);

function calculate() {
  let textInput = document.getElementById("textInput").value;
  let inputArray = textInput.split("");
  let encryptedText = encrypt(inputArray, keyList, keyList2);
  document.getElementById("decryptionOutput").innerText = encryptedText + "\n\nDecryption key is: " + userKey + userKey2;
}

function keystart() {
  location.reload();
  document.getElementById("textInput").value = "";
}

function encrypt(inputArray, keyList, keyList2) {
  let encryptedArray = [];
  for (let i = 0; i < inputArray.length; i++) {
    let index = i % 10;
    let currentCharacter = inputArray[i];
    let indexInKey = keyList[index].indexOf(currentCharacter);
    if (indexInKey >= 0 && indexInKey <= 100) {
      encryptedArray.push(keyList2[index][indexInKey]);
    } else {
      encryptedArray.push(currentCharacter);
    }
  }
  return encryptedArray.join("");
}


function deCryptCalculate() {
  let deCryptInput = document.getElementById("deCryptTextInput").value;
  let deCryptionKeyInput = document.getElementById("deCryptKeyInput").value;
  let deCryptKey = deCryptionKeyInput.split("");
  let deCryptArray = deCryptInput.split("");
  let deKey1 = getDeKey1(deCryptKey);
  let deKey2 = getDeKey2(deCryptKey);
  let deCryptedText = deCrypt(deCryptArray, deKey1, deKey2);
  document.getElementById("decryptionOutput").innerHTML = deCryptedText;
}

function derestart() {
  location.reload();
  document.getElementById("deCryptTextInput").value = "";
}

function getDeKey1(deCryptKey) {
  let dkeyList1 = [];
  let deCryptKeyFirst10 = deCryptKey.slice(0, 10);
  for (let i = 0; i < deCryptKeyFirst10.length; i++) {
    if (deCryptKeyFirst10[i] == 0) {
      dkeyList1.push(avain0);
    }
    else if (deCryptKeyFirst10[i] == 1) {
      dkeyList1.push(avain1);
    }
    else if (deCryptKeyFirst10[i] == 2) {
      dkeyList1.push(avain2);
    }
    else if (deCryptKeyFirst10[i] == 3) {
      dkeyList1.push(avain3);
    }
    else if (deCryptKeyFirst10[i] == 4) {
      dkeyList1.push(avain4);
    }
    else if (deCryptKeyFirst10[i] == 5) {
      dkeyList1.push(avain5);
    }
    else if (deCryptKeyFirst10[i] == 6) {
      dkeyList1.push(avain6);
    }
    else if (deCryptKeyFirst10[i] == 7) {
      dkeyList1.push(avain7);
    }
    else if (deCryptKeyFirst10[i] == 8) {
      dkeyList1.push(avain8);
    }
    else if (deCryptKeyFirst10[i] == 9) {
      dkeyList1.push(avain9);
    }
  }
  return dkeyList1;
}

function getDeKey2(deCryptKey) {
  let dkeyList2 = [];
  let deCryptKeyLast10 = deCryptKey.slice(-10);
  for (let i = 0; i < deCryptKeyLast10.length; i++) {
    if (deCryptKeyLast10[i] == 0) {
      dkeyList2.push(avain0);
    }
    else if (deCryptKeyLast10[i] == 1) {
      dkeyList2.push(avain1);
    }
    else if (deCryptKeyLast10[i] == 2) {
      dkeyList2.push(avain2);
    }
    else if (deCryptKeyLast10[i] == 3) {
      dkeyList2.push(avain3);
    }
    else if (deCryptKeyLast10[i] == 4) {
      dkeyList2.push(avain4);
    }
    else if (deCryptKeyLast10[i] == 5) {
      dkeyList2.push(avain5);
    }
    else if (deCryptKeyLast10[i] == 6) {
      dkeyList2.push(avain6);
    }
    else if (deCryptKeyLast10[i] == 7) {
      dkeyList2.push(avain7);
    }
    else if (deCryptKeyLast10[i] == 8) {
      dkeyList2.push(avain8);
    }
    else if (deCryptKeyLast10[i] == 9) {
      dkeyList2.push(avain9);
    }
  }
  return dkeyList2;
}

function deCrypt(deCryptArray, deKey1, deKey2) {
  let deCryptedArray = [];
  for (let i = 0; i < deCryptArray.length; i++) {
    let index = i % 10;
    let currentCharacter = deCryptArray[i];
    let indexInDeKey2 = deKey2[index].indexOf(currentCharacter);
    if (indexInDeKey2 >= 0) {
      deCryptedArray.push(deKey1[index][indexInDeKey2]);
    } else {
      deCryptedArray.push(currentCharacter);
    }
  }
  return deCryptedArray.join("");
}

/*
const array = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "å", "ä", "ö", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "Å", "Ä", "Ö", " ", "\n", "!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "-", "_", "=", "+", "[", "{", "]", "}", ",", ":", ";", "'", '"', "<", ".", ">", "/", "?", "`", "~", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];

//Durstenfeld shuffle, sama kuin keyListissä, tätä käytetään uusien avainten tekemiseen

shuffleArray(array);
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    let temp = array[i];
    array[i] = array[j];
    array[j] = temp;
  }
}
console.log(array);
*/

/*
const avainBackUp = [
    "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "å", "ä", "ö",
    "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "Å", "Ä", "Ö",
    "!", "@", "#", "$", "%", "^", "&", "*", "(", ")", "-", "_", "=", "+", "[", "{", "]", "}", ",", ":", ";", "'", '"', "<", ".", ">", "/", "?", "`",
    "~", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9"
  ];
  */
